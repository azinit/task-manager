(this["webpackJsonptask-manager"]=this["webpackJsonptask-manager"]||[]).push([[4],{32:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return i}));var a="https://test.megapolis-it.ru/api",r={list:"".concat(a,"/list"),add:"".concat(a,"/list"),remove:function(e){return"".concat(a,"/list/").concat(e)},edit:function(e){return"".concat(a,"/list/").concat(e)}},o={getList:function(){return fetch(r.list)},add:function(e){return fetch(r.add,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e})})},remove:function(e){return fetch(r.remove(e),{method:"DELETE"})},edit:function(e){return fetch(r.edit(e.id),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e.title})})}};function c(e){e.success||(console.error(e.error),console.log("\u041d\u043e \u043e\u0431\u044b\u0447\u043d\u044b\u0439 \u043a\u043b\u0438\u0435\u043d\u0442 \u043d\u0435 \u0441\u043c\u043e\u0436\u0435\u0442 \u0434\u043e\u0431\u0438\u0442\u044c\u0441\u044f \u0442\u0430\u043a\u043e\u0439 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u0438, \u0442.\u043a. \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043f\u0440\u0438\u0434\u0435\u0442\u0441\u044f \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u0435\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 :)"))}function i(e){alert("".concat("\u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430.","\r\n").concat(function(){switch(e){case"list":return"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0437\u0430\u0439\u0442\u0438 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u043f\u043e\u0437\u0434\u043d\u0435\u0435";case"add":return"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443 \u043f\u043e\u0437\u0434\u043d\u0435\u0435";case"edit":return"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443 \u043f\u043e\u0437\u0434\u043d\u0435\u0435";case"remove":return"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443 \u043f\u043e\u0437\u0434\u043d\u0435\u0435"}}()))}t.a=o},33:function(e,t,n){"use strict";var a=n(0),r=n.n(a);n(34);t.a=function(e){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header__title"},r.a.createElement("h1",null,e.title)),r.a.createElement("div",{className:"header__action"},e.children))}},34:function(e,t,n){},35:function(e,t,n){"use strict";var a=n(0),r=n.n(a);n(36);t.a=function(){return r.a.createElement("div",{className:"footer"},'\xa9 2019 \u0410\u041e "\u041c\u0435\u0433\u0430\u043f\u043e\u043b\u0438\u0441"')}},36:function(e,t,n){},40:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=function(e){var t=e.error,n=void 0===t?"":t;return r.a.createElement("div",{className:"form-error"},n)};t.a=function(e){return r.a.createElement("form",{onSubmit:e.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-label",htmlFor:"title"},"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),r.a.createElement("input",{className:"form-input",name:"title",type:"text",value:e.value,onChange:e.onChange}),r.a.createElement(o,{error:e.error})),r.a.createElement("div",{className:"form-group"},e.btnSubmit||r.a.createElement("button",{type:"submit",className:"btn btn_primary btn_alt-border btn_alt-color"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))}},41:function(e,t,n){"use strict";var a=n(0),r=n.n(a).a.createContext({add:function(e){throw new Error("ADD: not implemented!")},remove:function(e){throw new Error("REMOVE: not implemented!")}});t.a=r},42:function(e,t,n){},49:function(e,t,n){"use strict";function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.r(t);var r=n(39),o=n(0),c=n.n(o),i=n(33),l=n(41),u=n(35);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function f(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function d(e){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e){return(p="function"===typeof Symbol&&"symbol"===d(Symbol.iterator)?function(e){return d(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":d(e)})(e)}function b(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}n(42);var E=n(38),g=n(37),S=function(e){function t(){var e,n;s(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=b(this,(e=h(t)).call.apply(e,[this].concat(r)))).state={isOpen:!1},n.open=function(){n.setState({isOpen:!0})},n.close=function(){n.setState({isOpen:!1})},n}return y(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.btnOpen,n=e.modalTitle;return c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{className:t.className,onClick:this.open,"data-testid":"modal-open-btn"},t.caption),this.state.isOpen&&c.a.createElement("div",{className:"modal","data-testid":"modal"},c.a.createElement("div",{className:"modal-wrapper"},c.a.createElement("div",{className:"modal-bar"},c.a.createElement("button",{className:"btn btn_danger btn_square modal-close",onClick:this.close,"data-testid":"modal-close-btn"},c.a.createElement(g.a,{icon:E.b}))),c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header","data-testid":"modal-header"},c.a.createElement("h1",null,n)),c.a.createElement("div",{className:"modal-body"},this.props.children)))))}}]),t}(c.a.Component);S.defaultProps={btnOpen:{className:"",caption:"Open"},modalTitle:"Modal title",children:c.a.createElement(c.a.Fragment,null)};var O=n(40),N=function(e){function t(){var e,n;s(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=b(this,(e=h(t)).call.apply(e,[this].concat(r)))).state={value:"",error:""},n.modal=c.a.createRef(),n.onSubmit=function(e){e.preventDefault(),n.props.add(n.state.value,(function(e){var t;if(e.success)return null===(t=n.modal.current)||void 0===t||t.close(),void n.setState({value:""});n.setState({error:e.error})}))},n.onChange=function(e){n.setState({value:e.target.value})},n}return y(t,e),f(t,[{key:"render",value:function(){return c.a.createElement(S,{btnOpen:{caption:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",className:"btn btn_success btn_alt-color btn_wide"},modalTitle:"",ref:this.modal},c.a.createElement(O.a,{onSubmit:this.onSubmit,onChange:this.onChange,value:this.state.value,error:this.state.error}))}}]),t}(c.a.Component),w=n(32),_=n(12),j=c.a.lazy((function(){return n.e(6).then(n.bind(null,51))}));t.default=function(){var e=c.a.useState([]),t=Object(r.a)(e,2),n=t[0],o=t[1];function s(e,t){w.a.add(e).then((function(e){return e.json()})).then((function(r){r.success&&o([].concat(a(n),[{title:e,id:r.id}])),t(r)})).catch((function(){Object(w.b)("add")}))}return c.a.useEffect((function(){w.a.getList().then((function(e){return e.json()})).then((function(e){e.success&&o(e.data)})).catch((function(){Object(w.b)("list")}))}),[]),c.a.createElement(l.a.Provider,{value:{add:s,remove:function(e,t){w.a.remove(e).then((function(e){return e.json()})).then((function(a){a.success&&o(n.filter((function(t){return t.id!==e}))),t(a)})).catch((function(){Object(w.b)("remove")}))}}},c.a.createElement("div",{className:"wrapper"},c.a.createElement(i.a,{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u0434\u0430\u0447"},c.a.createElement(N,{add:s})),c.a.createElement("div",{className:"main"},c.a.createElement(c.a.Suspense,{fallback:c.a.createElement(_.a,{center:!0})},c.a.createElement(j,{classes:"app__todo-list",tasks:n}))),c.a.createElement(u.a,null)))}}}]);
//# sourceMappingURL=4.0b7bac0b.chunk.js.map